<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§¤ì¶œ ê´€ë ¨ ê³„ì‚° ê³µì‹ - ì „ë¬¸ ë¶„ì„ ë„êµ¬</title>
    <style>
        :root {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --bg-card: #333333;
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --accent-color: #ffd700;
            --accent-hover: #ffe55c;
            --input-bg: #3d3d3d;
            --border-color: #444444;
            --success-color: #48bb78;
            --warning-color: #f6ad55;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: var(--bg-secondary);
            border-radius: 15px;
            border: 2px solid var(--accent-color);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .header h1 {
            color: var(--accent-color);
            font-size: 2.5rem;
            font-weight: 700;
            letter-spacing: 0.1em;
            margin-bottom: 10px;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
            .header h1 {
                font-size: 2rem;
                letter-spacing: 0.05em;
            }
        }

        .card {
            background: var(--bg-card);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid var(--border-color);
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(0,0,0,0.6);
        }

        .card-title {
            color: var(--accent-color);
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--accent-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        @media (max-width: 600px) {
            .input-row {
                grid-template-columns: 1fr;
            }
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .input-group input {
            background: var(--input-bg);
            border: 2px solid var(--border-color);
            color: var(--text-primary);
            padding: 12px;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease, background-color 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--accent-color);
            background: #404040;
        }

        .result-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        .result-primary {
            background: linear-gradient(135deg, var(--accent-color), var(--accent-hover));
            color: #1a1a1a;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
        }

        .result-secondary {
            background: var(--success-color);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
        }

        .result-item {
            background: rgba(255, 215, 0, 0.1);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid var(--accent-color);
        }

        .result-label {
            font-size: 0.95rem;
            color: var(--text-primary);
        }

        .result-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--accent-color);
        }

        .formula-box {
            background: rgba(255, 215, 0, 0.05);
            border-left: 4px solid var(--accent-color);
            padding: 15px;
            margin-top: 15px;
            border-radius: 5px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            color: var(--text-secondary);
            border-top: 1px solid var(--border-color);
        }

        .emoji {
            font-size: 1.2rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ë§¤ì¶œ ê´€ë ¨ ê³„ì‚° ê³µì‹</h1>
            <p>ì„±ê³µì„ ì„¤ê³„í•˜ëŠ” ëŒ€í‘œë“¤ì˜ ëª¨ì„ Â· ì „ë¬¸ ë¶„ì„ ë„êµ¬</p>
        </div>

        <!-- ëª©í‘œ ë§¤ì¶œ ì„¤ì • -->
        <div class="grid">
            <div class="card">
                <div class="card-title">
                    <span class="emoji">ğŸ¯</span> ëª©í‘œ ë§¤ì¶œ ê³„ì‚°
                </div>
                
                <div class="input-row">
                    <div class="input-group">
                        <label>BEP (ì†ìµë¶„ê¸°ì )</label>
                        <input type="number" id="bep" placeholder="ì˜ˆ: 10000000" oninput="calculateAll()">
                    </div>
                    <div class="input-group">
                        <label>ëª©í‘œ ì´ìµë¥  (%)</label>
                        <input type="number" id="profitMargin" placeholder="ì˜ˆ: 25" oninput="calculateAll()">
                    </div>
                </div>

                <div class="input-row">
                    <div class="input-group">
                        <label>ëŒ€í‘œ ê¸‰ì—¬</label>
                        <input type="number" id="ceoSalary" placeholder="ì˜ˆ: 5000000" oninput="calculateAll()">
                    </div>
                    <div class="input-group">
                        <label>ì¬ë“±ë¡ ì˜ˆìƒ ë§¤ì¶œ</label>
                        <input type="number" id="recurringRevenue" placeholder="ì˜ˆ: 3000000" oninput="calculateAll()">
                    </div>
                </div>

                <div class="result-section">
                    <div class="result-primary">
                        <span>ëª©í‘œ ë§¤ì¶œ</span>
                        <span id="targetRevenue">0ì›</span>
                    </div>
                    <div class="result-secondary">
                        <span>í•„ìš” ì‹ ê·œ ë§¤ì¶œ</span>
                        <span id="newRevenue">0ì›</span>
                    </div>
                </div>

                <div class="formula-box">
                    <strong>ê³µì‹:</strong> ëª©í‘œ ë§¤ì¶œ = BEP Ã· (1 - ëª©í‘œì´ìµë¥ ) + ëŒ€í‘œê¸‰ì—¬
                </div>
            </div>

            <!-- ìœ ì…ìˆ˜ ì²´í¬ -->
            <div class="card">
                <div class="card-title">
                    <span class="emoji">ğŸ‘¥</span> ìœ ì…ìˆ˜ ì²´í¬
                </div>

                <div class="input-row">
                    <div class="input-group">
                        <label>3ê°œì›” í‰ê·  ì‹ ê·œ ê°ë‹¨ê°€</label>
                        <input type="number" id="avgCustomerValue" placeholder="ì˜ˆ: 800000" oninput="calculateAll()">
                    </div>
                    <div class="input-group">
                        <label>3ê°œì›” í‰ê·  ì‹ ê·œ ì „í™˜ìœ¨ (%)</label>
                        <input type="number" id="avgConversionRate" placeholder="ì˜ˆ: 35" oninput="calculateAll()">
                    </div>
                </div>

                <div class="result-section">
                    <div class="result-item">
                        <span class="result-label">í•„ìš” ì‹ ê·œ ì „í™˜ ëª©í‘œ ìˆ˜</span>
                        <span class="result-value" id="targetCustomers">0ëª…</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">í•„ìš”í•œ ìƒë‹´ ìˆ˜</span>
                        <span class="result-value" id="targetConsultations">0ê±´</span>
                    </div>
                </div>

                <div class="formula-box">
                    <strong>í•„ìš” ì‹ ê·œ ì „í™˜ ëª©í‘œ ìˆ˜:</strong> í•„ìš” ì‹ ê·œ ë§¤ì¶œ Ã· 3ê°œì›” í‰ê·  ì‹ ê·œ ê°ë‹¨ê°€<br>
                    <strong>í•„ìš”í•œ ìƒë‹´ ìˆ˜:</strong> í•„ìš” ì‹ ê·œ ì „í™˜ ëª©í‘œ ìˆ˜ Ã· 3ê°œì›” í‰ê·  ì‹ ê·œ ì „í™˜ìœ¨
                </div>
            </div>
        </div>

        <!-- ì „í™˜ìœ¨ ì²´í¬ -->
        <div class="grid">
            <div class="card">
                <div class="card-title">
                    <span class="emoji">ğŸ“Š</span> ì „í™˜ìœ¨ ì²´í¬
                </div>

                <div class="input-row">
                    <div class="input-group">
                        <label>ìµœì´ˆ ì˜ˆì•½ ë¬¸ì˜ ê±´ìˆ˜</label>
                        <input type="number" id="inquiries" placeholder="ì˜ˆ: 120" oninput="calculateAll()">
                    </div>
                    <div class="input-group">
                        <label>ì˜ˆì•½ì ìˆ˜</label>
                        <input type="number" id="reservations" placeholder="ì˜ˆ: 90" oninput="calculateAll()">
                    </div>
                </div>

                <div class="input-row">
                    <div class="input-group">
                        <label>ë°©ë¬¸ì ìˆ˜</label>
                        <input type="number" id="visitors" placeholder="ì˜ˆ: 75" oninput="calculateAll()">
                    </div>
                    <div class="input-group">
                        <label>ë¯¸ë°©ë¬¸ì ìˆ˜</label>
                        <input type="number" id="noShows" placeholder="ì˜ˆ: 15" oninput="calculateAll()">
                    </div>
                </div>

                <div class="input-row">
                    <div class="input-group">
                        <label>ìƒë‹´ì ìˆ˜</label>
                        <input type="number" id="consultations" placeholder="ì˜ˆ: 65" oninput="calculateAll()">
                    </div>
                    <div class="input-group">
                        <label>ë“±ë¡ì ìˆ˜</label>
                        <input type="number" id="registrations" placeholder="ì˜ˆ: 25" oninput="calculateAll()">
                    </div>
                </div>

                <div class="result-section">
                    <div class="result-item">
                        <span class="result-label">ë¬¸ì˜ ì „í™˜ìœ¨</span>
                        <span class="result-value" id="inquiryConversion">0%</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">ë°©ë¬¸ìœ¨</span>
                        <span class="result-value" id="visitRate">0%</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">ë…¸ì‡¼ìœ¨</span>
                        <span class="result-value" id="noShowRate">0%</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">ìƒë‹´ ì „í™˜ìœ¨</span>
                        <span class="result-value" id="consultationConversion">0%</span>
                    </div>
                </div>
            </div>

            <!-- ê°ë‹¨ê°€ ì²´í¬ -->
            <div class="card">
                <div class="card-title">
                    <span class="emoji">ğŸ’°</span> ê°ë‹¨ê°€ ì²´í¬
                </div>

                <div class="input-row">
                    <div class="input-group">
                        <label>ì›” ì´ ë§¤ì¶œ</label>
                        <input type="number" id="monthlyRevenue" placeholder="ì˜ˆ: 25000000" oninput="calculateAll()">
                    </div>
                    <div class="input-group">
                        <label>ì›” ì´ ë“±ë¡ì ìˆ˜</label>
                        <input type="number" id="monthlyRegistrations" placeholder="ì˜ˆ: 30" oninput="calculateAll()">
                    </div>
                </div>

                <div class="input-row">
                    <div class="input-group">
                        <label>3ê°œì›” ì‹ ê·œ ë§¤ì¶œí•©ì‚°ì•¡</label>
                        <input type="number" id="quarterlyRevenue" placeholder="ì˜ˆ: 60000000" oninput="calculateAll()">
                    </div>
                    <div class="input-group">
                        <label>3ê°œì›” ì´ ì‹ ê·œ ë“±ë¡ì ìˆ˜</label>
                        <input type="number" id="quarterlyRegistrations" placeholder="ì˜ˆ: 75" oninput="calculateAll()">
                    </div>
                </div>

                <div class="result-section">
                    <div class="result-item">
                        <span class="result-label">ì›”ê°„ í‰ê·  ì‹ ê·œ ê°ë‹¨ê°€</span>
                        <span class="result-value" id="monthlyAvgValue">0ì›</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">ëª©í‘œ ê°ë‹¨ê°€</span>
                        <span class="result-value" id="targetValue">0ì›</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">3ê°œì›” í‰ê·  ì‹ ê·œ ê°ë‹¨ê°€</span>
                        <span class="result-value" id="quarterlyAvgValue">0ì›</span>
                    </div>
                </div>

                <div class="formula-box">
                    <strong>ì›”ê°„ í‰ê· :</strong> ì›” ì´ ë§¤ì¶œ Ã· ì›” ì´ ë“±ë¡ì ìˆ˜<br>
                    <strong>ëª©í‘œ ê°ë‹¨ê°€:</strong> í•„ìš” ì‹ ê·œ ë§¤ì¶œ Ã· í•„ìš” ì‹ ê·œ ì „í™˜ ëª©í‘œ ìˆ˜<br>
                    <strong>3ê°œì›” í‰ê· :</strong> 3ê°œì›” ì‹ ê·œ ë§¤ì¶œí•©ì‚°ì•¡ Ã· 3ê°œì›” ì´ ì‹ ê·œ ë“±ë¡ì ìˆ˜
                </div>
            </div>
        </div>

        <div class="footer">
            <p>Â© ì•„ë£¨ì¹´ ì»´í¼ë‹ˆ - ì„±ê³µì„ ì„¤ê³„í•˜ëŠ” ëŒ€í‘œë“¤ì˜ ëª¨ì„</p>
            <p style="margin-top: 5px; font-size: 0.8rem;">ì…ë ¥ëœ ë°ì´í„°ëŠ” ë¸Œë¼ìš°ì €ì—ì„œë§Œ ì²˜ë¦¬ë˜ë©° ì™¸ë¶€ë¡œ ì „ì†¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
        </div>
    </div>

    <script>
        // ì•ˆì „í•œ ë‚˜ëˆ„ê¸° í•¨ìˆ˜ (0ìœ¼ë¡œ ë‚˜ëˆ„ê¸° ë°©ì§€)
        function safeDiv(numerator, denominator) {
            if (!denominator || isNaN(numerator) || isNaN(denominator) || denominator === 0) {
                return 0;
            }
            return numerator / denominator;
        }

        // ìˆ«ì í¬ë§·íŒ… í•¨ìˆ˜
        function formatNumber(num, decimals = 0) {
            if (!isFinite(num) || isNaN(num)) return '0';
            return new Intl.NumberFormat('ko-KR', {
                minimumFractionDigits: decimals,
                maximumFractionDigits: decimals
            }).format(num);
        }

        // í†µí™” í¬ë§·íŒ… í•¨ìˆ˜
        function formatCurrency(num) {
            return formatNumber(num) + 'ì›';
        }

        // í¼ì„¼íŠ¸ í¬ë§·íŒ… í•¨ìˆ˜
        function formatPercent(num) {
            return formatNumber(num * 100, 1) + '%';
        }

        // ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜
        function getValue(id) {
            const value = parseFloat(document.getElementById(id).value);
            return isNaN(value) ? 0 : value;
        }

        // ì „ì²´ ê³„ì‚° í•¨ìˆ˜
        function calculateAll() {
            // 1. ëª©í‘œ ë§¤ì¶œ ê³„ì‚°
            const bep = getValue('bep');
            const profitMargin = getValue('profitMargin') / 100; // í¼ì„¼íŠ¸ë¥¼ ì†Œìˆ˜ë¡œ ë³€í™˜
            const ceoSalary = getValue('ceoSalary');
            const recurringRevenue = getValue('recurringRevenue');

            // ëª©í‘œ ë§¤ì¶œ ê³µì‹: BEP Ã· (1 - ëª©í‘œì´ìµë¥ ) + ëŒ€í‘œê¸‰ì—¬
            let targetRevenue = 0;
            if (profitMargin < 1) {
                targetRevenue = safeDiv(bep, (1 - profitMargin)) + ceoSalary;
            }

            const newRevenue = Math.max(targetRevenue - recurringRevenue, 0);

            document.getElementById('targetRevenue').textContent = formatCurrency(targetRevenue);
            document.getElementById('newRevenue').textContent = formatCurrency(newRevenue);

            // 2. ìœ ì…ìˆ˜ ê³„ì‚°
            const avgCustomerValue = getValue('avgCustomerValue');
            const avgConversionRate = getValue('avgConversionRate') / 100; // í¼ì„¼íŠ¸ë¥¼ ì†Œìˆ˜ë¡œ ë³€í™˜

            const targetCustomers = safeDiv(newRevenue, avgCustomerValue);
            const targetConsultations = safeDiv(targetCustomers, avgConversionRate);

            document.getElementById('targetCustomers').textContent = formatNumber(targetCustomers, 1) + 'ëª…';
            document.getElementById('targetConsultations').textContent = formatNumber(targetConsultations, 1) + 'ê±´';

            // 3. ì „í™˜ìœ¨ ê³„ì‚°
            const inquiries = getValue('inquiries');
            const reservations = getValue('reservations');
            const visitors = getValue('visitors');
            const noShows = getValue('noShows');
            const consultations = getValue('consultations');
            const registrations = getValue('registrations');

            const inquiryConversion = safeDiv(reservations, inquiries);
            const visitRate = safeDiv(visitors, reservations);
            const noShowRate = safeDiv(noShows, reservations);
            const consultationConversion = safeDiv(registrations, consultations);

            document.getElementById('inquiryConversion').textContent = formatPercent(inquiryConversion);
            document.getElementById('visitRate').textContent = formatPercent(visitRate);
            document.getElementById('noShowRate').textContent = formatPercent(noShowRate);
            document.getElementById('consultationConversion').textContent = formatPercent(consultationConversion);

            // 4. ê°ë‹¨ê°€ ê³„ì‚°
            const monthlyRevenue = getValue('monthlyRevenue');
            const monthlyRegistrations = getValue('monthlyRegistrations');
            const quarterlyRevenue = getValue('quarterlyRevenue');
            const quarterlyRegistrations = getValue('quarterlyRegistrations');

            const monthlyAvgValue = safeDiv(monthlyRevenue, monthlyRegistrations);
            const targetValue = safeDiv(newRevenue, targetCustomers);
            const quarterlyAvgValue = safeDiv(quarterlyRevenue, quarterlyRegistrations);

            document.getElementById('monthlyAvgValue').textContent = formatCurrency(monthlyAvgValue);
            document.getElementById('targetValue').textContent = formatCurrency(targetValue);
            document.getElementById('quarterlyAvgValue').textContent = formatCurrency(quarterlyAvgValue);
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ê³„ì‚° ì‹¤í–‰
        window.addEventListener('load', calculateAll);
    </script>
</body>
</html>
